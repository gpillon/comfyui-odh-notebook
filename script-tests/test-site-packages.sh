#!/bin/bash

# Test script to verify site-packages configuration

echo "=== Python Site-Packages Test ==="
echo "Python executable: $(which python)"
echo "Python version: $(python --version)"
echo

echo "=== Environment Variables ==="
echo "PYTHONPATH: $PYTHONPATH"
echo "PIP_USER: ${PIP_USER:-'(unset)'}"
echo "PIP_PREFIX: ${PIP_PREFIX:-'(unset)'}"
echo "PYTHONUSERBASE: ${PYTHONUSERBASE:-'(unset)'}"
echo

echo "=== Python Path Configuration ==="
python -c "import sys; print('\\n'.join(sys.path))"
echo

echo "=== Site-Packages Directory ==="
USER_SITE_PACKAGES="/opt/app-root/src/.local/lib/python3.11/site-packages"
echo "User site-packages: $USER_SITE_PACKAGES"
echo "Directory exists: $([ -d "$USER_SITE_PACKAGES" ] && echo 'Yes' || echo 'No')"
echo "Directory writable: $([ -w "$USER_SITE_PACKAGES" ] && echo 'Yes' || echo 'No')"
echo

echo "=== Pip Configuration ==="
echo "Pip version: $(pip --version)"
echo "Pip config list:"
pip config list
echo

echo "=== Test Package Installation ==="
echo "Testing installation of a simple package..."
pip install --dry-run six
echo "Test completed." 